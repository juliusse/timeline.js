<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>timeline.js unit tests</title>
    <link rel="stylesheet" href="ext/qunit/qunit.css">
    <script src="ext/qunit/qunit.js"></script>
    <script src="js/timeline.js"></script>
    <script>
        test("TimelineEntries in time range", function () {
            var timeline = new Timeline(document.getElementById("timeline"), 2000);

            var fromDate = new Date(2001, 5, 1);
            var toDate = new Date(2001, 10, 1);

            equal(timeline.getEntriesInTimeRange(fromDate, toDate).length, 0, "No entry present");


            //first entry (x---|----|---x)
            var timelineEntry1 = new TimelineEntry("entry1", new Date(2001, 1, 1), new Date(2002, 1, 1));
            timeline.addTimelineEntry(timelineEntry1);
            equal(timeline.getEntriesInTimeRange(fromDate, toDate).length, 1, "One entry present");

            //second entry (|x---|---x)
            var timelineEntry2 = new TimelineEntry("entry1", fromDate, new Date(2002, 1, 1));
            timeline.addTimelineEntry(timelineEntry2);
            equal(timeline.getEntriesInTimeRange(fromDate, toDate).length, 2, "Two entries present");

            //third entry (x--|----x|)
            var timelineEntry3 = new TimelineEntry("entry1", new Date(2001, 1, 1), toDate);
            timeline.addTimelineEntry(timelineEntry3);
            equal(timeline.getEntriesInTimeRange(fromDate, toDate).length, 3, "Three entries present");

            //fourth entry (|x---x|)
            var timelineEntry4 = new TimelineEntry("entry1", fromDate, toDate);
            timeline.addTimelineEntry(timelineEntry4);
            equal(timeline.getEntriesInTimeRange(fromDate, toDate).length, 4, "Four entries present");

        });

        test("Levels of TimelineEntries", function () {
            var timeline = new Timeline(document.getElementById("timeline"), 2000);

            /*
                Entry structur
                1.    |------|          => 0
                2. |-----|              => 1
                3.          |-------|   => 1
                4.   |----------|       => 2


            */

            //first entry (x---|----|---x)
            var timelineEntry1 = new TimelineEntry("entry", new Date(2001, 1, 1), new Date(2002, 1, 1));
            timeline.addTimelineEntry(timelineEntry1);
            equal(timelineEntry1.level,0,"first");

            //second entry (|x---|---x)
            var timelineEntry2 = new TimelineEntry("entry", new Date(2000, 1, 1), new Date(2001, 5, 1));
            timeline.addTimelineEntry(timelineEntry2);
            equal(timelineEntry2.level, 1, "second");

            //third entry (x--|----x|)
            var timelineEntry3 = new TimelineEntry("entry", new Date(2001, 7, 1), new Date(2003, 1, 1));
            timeline.addTimelineEntry(timelineEntry3);
            equal(timelineEntry3.level, 1), "third";

            //fourth entry (|x---x|)
            var timelineEntry4 = new TimelineEntry("entry", new Date(2000, 5, 1), new Date(2002, 5, 1));
            timeline.addTimelineEntry(timelineEntry4);
            equal(timelineEntry4.level, 2), "fourth";

        });



    </script>
</head>
<body>
    <div id="qunit"></div>
    <div id="qunit-fixture"></div> 
    <div id="timeline" style="height:500px;width:40px;position:relative;"></div>  
</body>
</html>
